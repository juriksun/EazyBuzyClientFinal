import {Injectable} from "@angular/core";
import {Http, Response} from '@angular/http'
import {Observable} from 'rxjs/Observable';
import {Headers, RequestOptions} from '@angular/http';
import 'rxjs/add/operator/catch';
import 'rxjs/add/operator/map';

import { TaskResponse } from "../models/tasks-response.model";
import { User } from "../models/user.model";
import { UserServiseModule } from "./user_mdl.component";
import { Url } from "../models/url.model";

@Injectable()
export class RouteServiseModule{

  private url: string = 'http://localhost:3000/';
  // private url: string = 'https://eazy-buzy-server.herokuapp.com/';
  // private url: string = Url().getUrl();
  public route: any;
  public staticRes: any = {"status":"true","data":{"_id":"5ade4c1faa633041246b3f6a","recommended_route":{"segments":[{"startPoint":{"address":"Anne Frank St 12, Ramat Gan, Израиль","place_id":"ChIJnfFzOcRLHRURM9hDEucFhfs","geometry":{"location":{"lat":32.0900601,"lng":34.803569100000004}},"task_identifier":{"name":"Start"}},"endPoint":{"geometry":{"location":{"lat":32.082628,"lng":34.802189},"viewport":{"northeast":{"lat":32.08397782989272,"lng":34.80353882989272},"southwest":{"lat":32.08127817010727,"lng":34.80083917010728}}},"icon":"https://maps.gstatic.com/mapfiles/place_api/icons/gas_station-71.png","id":"bd0cf769190cf35ecad083acc2e140f73bce8e96","name":"Delek","opening_hours":{"open_now":true,"weekday_text":[]},"photos":[{"height":2592,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/104597251625825490445/photos\">Ilay Stepanenko</a>"],"photo_reference":"CmRaAAAAfKh1_TFj5IctH8o7s7lYgjF3dSDjkp0-iQJjxmYsE6SIjkLbiZE9TYo0pc1txNi2tk3wKab7RSdOYN_oUEOhxpMsr3C3fw9ESydlXM1Ifu2vfnJmKbutnmju5LiwLwXUEhAv9aHewtqJkzHfGc9wgHm6GhQtG96UT-UWF5h7A9e_ug4FJyuMGQ","width":4608}],"place_id":"ChIJwSfU0bhLHRUR7lnDkXluJWQ","rating":3.5,"reference":"CmRbAAAAy4hrhjoB16s_Zm8eqJTaJsGy-Ao0OzStsLezOxM1-Sn9YWqHjw8jfXchlUTHHofQIdA0mVEfbpKHqHkWWoZ1MvmTMNeltNRv7LRdQsABUkqiS6-Ve76bdTI9ZTVbx3wGEhB-g5UyGNUyO7Q4hqp-5JNSGhRU2Q14Li_vDSLqE9DOCfqdiilabA","scope":"GOOGLE","types":["gas_station","point_of_interest","establishment"],"vicinity":"זאב זבוטינסקי 4, רמת גן","task_identifier":{"id":"5adcb2d48c71eb0ac054640c","name":"fuil"}},"duration":858,"polylines":[{"start":{"lat":32.09006,"lng":34.80371},"end":{"lat":32.08943,"lng":34.80365}},{"start":{"lat":32.08943,"lng":34.80365},"end":{"lat":32.0891,"lng":34.80399}},{"start":{"lat":32.0891,"lng":34.80399},"end":{"lat":32.08909,"lng":34.80398}},{"start":{"lat":32.08909,"lng":34.80398},"end":{"lat":32.08908,"lng":34.80397}},{"start":{"lat":32.08908,"lng":34.80397},"end":{"lat":32.08908,"lng":34.80396}},{"start":{"lat":32.08908,"lng":34.80396},"end":{"lat":32.08906,"lng":34.80396}},{"start":{"lat":32.08906,"lng":34.80396},"end":{"lat":32.08904,"lng":34.80395}},{"start":{"lat":32.08904,"lng":34.80395},"end":{"lat":32.08901,"lng":34.80395}},{"start":{"lat":32.08901,"lng":34.80395},"end":{"lat":32.08898,"lng":34.80397}},{"start":{"lat":32.08898,"lng":34.80397},"end":{"lat":32.08894,"lng":34.80403}},{"start":{"lat":32.08894,"lng":34.80403},"end":{"lat":32.08893,"lng":34.80405}},{"start":{"lat":32.08893,"lng":34.80405},"end":{"lat":32.08893,"lng":34.80406}},{"start":{"lat":32.08893,"lng":34.80406},"end":{"lat":32.0885,"lng":34.80409}},{"start":{"lat":32.0885,"lng":34.80409},"end":{"lat":32.08803,"lng":34.8041}},{"start":{"lat":32.08803,"lng":34.8041},"end":{"lat":32.08787,"lng":34.80404}},{"start":{"lat":32.08787,"lng":34.80404},"end":{"lat":32.08736,"lng":34.80368}},{"start":{"lat":32.08736,"lng":34.80368},"end":{"lat":32.08724,"lng":34.80359}},{"start":{"lat":32.08724,"lng":34.80359},"end":{"lat":32.08687,"lng":34.80336}},{"start":{"lat":32.08687,"lng":34.80336},"end":{"lat":32.08582,"lng":34.8027}},{"start":{"lat":32.08582,"lng":34.8027},"end":{"lat":32.08559,"lng":34.80256}},{"start":{"lat":32.08559,"lng":34.80256},"end":{"lat":32.08533,"lng":34.80245}},{"start":{"lat":32.08533,"lng":34.80245},"end":{"lat":32.08532,"lng":34.80247}},{"start":{"lat":32.08532,"lng":34.80247},"end":{"lat":32.08532,"lng":34.80248}},{"start":{"lat":32.08532,"lng":34.80248},"end":{"lat":32.0853,"lng":34.8025}},{"start":{"lat":32.0853,"lng":34.8025},"end":{"lat":32.08527,"lng":34.80253}},{"start":{"lat":32.08527,"lng":34.80253},"end":{"lat":32.08523,"lng":34.80254}},{"start":{"lat":32.08523,"lng":34.80254},"end":{"lat":32.0852,"lng":34.80253}},{"start":{"lat":32.0852,"lng":34.80253},"end":{"lat":32.08519,"lng":34.80253}},{"start":{"lat":32.08519,"lng":34.80253},"end":{"lat":32.08468,"lng":34.80338}},{"start":{"lat":32.08468,"lng":34.80338},"end":{"lat":32.08452,"lng":34.80367}},{"start":{"lat":32.08452,"lng":34.80367},"end":{"lat":32.08424,"lng":34.80352}},{"start":{"lat":32.08424,"lng":34.80352},"end":{"lat":32.08404,"lng":34.80343}},{"start":{"lat":32.08404,"lng":34.80343},"end":{"lat":32.08347,"lng":34.80339}},{"start":{"lat":32.08347,"lng":34.80339},"end":{"lat":32.08311,"lng":34.8034}},{"start":{"lat":32.08311,"lng":34.8034},"end":{"lat":32.0828,"lng":34.80346}},{"start":{"lat":32.0828,"lng":34.80346},"end":{"lat":32.0828,"lng":34.80337}},{"start":{"lat":32.0828,"lng":34.80337},"end":{"lat":32.08277,"lng":34.8029}},{"start":{"lat":32.08277,"lng":34.8029},"end":{"lat":32.08279,"lng":34.80251}},{"start":{"lat":32.08279,"lng":34.80251},"end":{"lat":32.08265,"lng":34.80229}},{"start":{"lat":32.08265,"lng":34.80229},"end":{"lat":32.08264,"lng":34.80219}}]},{"startPoint":{"geometry":{"location":{"lat":32.082628,"lng":34.802189},"viewport":{"northeast":{"lat":32.08397782989272,"lng":34.80353882989272},"southwest":{"lat":32.08127817010727,"lng":34.80083917010728}}},"icon":"https://maps.gstatic.com/mapfiles/place_api/icons/gas_station-71.png","id":"bd0cf769190cf35ecad083acc2e140f73bce8e96","name":"Delek","opening_hours":{"open_now":true,"weekday_text":[]},"photos":[{"height":2592,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/104597251625825490445/photos\">Ilay Stepanenko</a>"],"photo_reference":"CmRaAAAAfKh1_TFj5IctH8o7s7lYgjF3dSDjkp0-iQJjxmYsE6SIjkLbiZE9TYo0pc1txNi2tk3wKab7RSdOYN_oUEOhxpMsr3C3fw9ESydlXM1Ifu2vfnJmKbutnmju5LiwLwXUEhAv9aHewtqJkzHfGc9wgHm6GhQtG96UT-UWF5h7A9e_ug4FJyuMGQ","width":4608}],"place_id":"ChIJwSfU0bhLHRUR7lnDkXluJWQ","rating":3.5,"reference":"CmRbAAAAy4hrhjoB16s_Zm8eqJTaJsGy-Ao0OzStsLezOxM1-Sn9YWqHjw8jfXchlUTHHofQIdA0mVEfbpKHqHkWWoZ1MvmTMNeltNRv7LRdQsABUkqiS6-Ve76bdTI9ZTVbx3wGEhB-g5UyGNUyO7Q4hqp-5JNSGhRU2Q14Li_vDSLqE9DOCfqdiilabA","scope":"GOOGLE","types":["gas_station","point_of_interest","establishment"],"vicinity":"זאב זבוטינסקי 4, רמת גן","task_identifier":{"id":"5adcb2d48c71eb0ac054640c","name":"fuil"}},"endPoint":{"geometry":{"location":{"lat":32.0756032,"lng":34.8089201},"viewport":{"northeast":{"lat":32.07686547989272,"lng":34.81032337989271},"southwest":{"lat":32.07416582010728,"lng":34.80762372010727}}},"icon":"https://maps.gstatic.com/mapfiles/place_api/icons/bank_dollar-71.png","id":"a2ca0a2d8704bcbe7ae02781bea94dc6b4dbe187","name":"בנק לאומי","opening_hours":{"open_now":false,"weekday_text":[]},"photos":[{"height":2917,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/110383030743898569206/photos\">Eyal Barlev</a>"],"photo_reference":"CmRaAAAAKB3ph-GZAIqxSRtl1U6tJzneJEzBaPoiUmnKhwdC-Eb4_FhHeTeP0sFubPHrulHHkotl7FFUpjFIaV0KhtlXt6RFhsPlhQD4JLT-hM7vAm_zlz82jqNNvXMYU2_9DlclEhAk03rxE6W_iFLpVvMYHrcLGhT0JIkY_PxCUpJoGNbPnca878Epwg","width":4092}],"place_id":"ChIJ557S87BLHRUROEsdf2-DYVs","rating":3.5,"reference":"CmRbAAAA5MR7-yuY_M7f6SIeuCLWMkNa3ZuGIY-hRfB4R5QFQyy4DLo152O9Z3pnOzxknU0uCB2LSP1-Gc_o1DtbmgqKJOYHTXP9dRoaCkTtAKbEs5a9IY-ucLb_cnqXvJPpcsofEhB19PpdDqT-31E0s1NRv6NpGhQt3Qh7Yt45xFrqolEtM32TyhOK1w","scope":"GOOGLE","types":["bank","finance","point_of_interest","establishment"],"vicinity":"67, כצנלסון, גבעתיים","task_identifier":{"id":"5adca4ddc8965c4734dd3d86","name":"leumi"}},"duration":1079,"polylines":[{"start":{"lat":32.08264,"lng":34.80219},"end":{"lat":32.08269,"lng":34.80237}},{"start":{"lat":32.08269,"lng":34.80237},"end":{"lat":32.08279,"lng":34.80251}},{"start":{"lat":32.08279,"lng":34.80251},"end":{"lat":32.08277,"lng":34.8029}},{"start":{"lat":32.08277,"lng":34.8029},"end":{"lat":32.08268,"lng":34.80329}},{"start":{"lat":32.08268,"lng":34.80329},"end":{"lat":32.0826,"lng":34.80353}},{"start":{"lat":32.0826,"lng":34.80353},"end":{"lat":32.0821,"lng":34.80472}},{"start":{"lat":32.0821,"lng":34.80472},"end":{"lat":32.08193,"lng":34.8047}},{"start":{"lat":32.08193,"lng":34.8047},"end":{"lat":32.0818,"lng":34.8047}},{"start":{"lat":32.0818,"lng":34.8047},"end":{"lat":32.08052,"lng":34.80483}},{"start":{"lat":32.08052,"lng":34.80483},"end":{"lat":32.07954,"lng":34.80496}},{"start":{"lat":32.07954,"lng":34.80496},"end":{"lat":32.07958,"lng":34.80561}},{"start":{"lat":32.07958,"lng":34.80561},"end":{"lat":32.07952,"lng":34.80567}},{"start":{"lat":32.07952,"lng":34.80567},"end":{"lat":32.07947,"lng":34.80569}},{"start":{"lat":32.07947,"lng":34.80569},"end":{"lat":32.07885,"lng":34.80581}},{"start":{"lat":32.07885,"lng":34.80581},"end":{"lat":32.07863,"lng":34.80586}},{"start":{"lat":32.07863,"lng":34.80586},"end":{"lat":32.07861,"lng":34.80581}},{"start":{"lat":32.07861,"lng":34.80581},"end":{"lat":32.07857,"lng":34.80575}},{"start":{"lat":32.07857,"lng":34.80575},"end":{"lat":32.07853,"lng":34.80571}},{"start":{"lat":32.07853,"lng":34.80571},"end":{"lat":32.07843,"lng":34.80566}},{"start":{"lat":32.07843,"lng":34.80566},"end":{"lat":32.07832,"lng":34.80567}},{"start":{"lat":32.07832,"lng":34.80567},"end":{"lat":32.07823,"lng":34.80573}},{"start":{"lat":32.07823,"lng":34.80573},"end":{"lat":32.07817,"lng":34.80584}},{"start":{"lat":32.07817,"lng":34.80584},"end":{"lat":32.07815,"lng":34.8059}},{"start":{"lat":32.07815,"lng":34.8059},"end":{"lat":32.07815,"lng":34.80599}},{"start":{"lat":32.07815,"lng":34.80599},"end":{"lat":32.07779,"lng":34.80607}},{"start":{"lat":32.07779,"lng":34.80607},"end":{"lat":32.07745,"lng":34.80614}},{"start":{"lat":32.07745,"lng":34.80614},"end":{"lat":32.07635,"lng":34.80637}},{"start":{"lat":32.07635,"lng":34.80637},"end":{"lat":32.07583,"lng":34.80642}},{"start":{"lat":32.07583,"lng":34.80642},"end":{"lat":32.07521,"lng":34.80644}},{"start":{"lat":32.07521,"lng":34.80644},"end":{"lat":32.07524,"lng":34.80684}},{"start":{"lat":32.07524,"lng":34.80684},"end":{"lat":32.07529,"lng":34.80766}},{"start":{"lat":32.07529,"lng":34.80766},"end":{"lat":32.07531,"lng":34.80846}},{"start":{"lat":32.07531,"lng":34.80846},"end":{"lat":32.07533,"lng":34.80876}},{"start":{"lat":32.07533,"lng":34.80876},"end":{"lat":32.07543,"lng":34.80903}}]},{"startPoint":{"geometry":{"location":{"lat":32.0756032,"lng":34.8089201},"viewport":{"northeast":{"lat":32.07686547989272,"lng":34.81032337989271},"southwest":{"lat":32.07416582010728,"lng":34.80762372010727}}},"icon":"https://maps.gstatic.com/mapfiles/place_api/icons/bank_dollar-71.png","id":"a2ca0a2d8704bcbe7ae02781bea94dc6b4dbe187","name":"בנק לאומי","opening_hours":{"open_now":false,"weekday_text":[]},"photos":[{"height":2917,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/110383030743898569206/photos\">Eyal Barlev</a>"],"photo_reference":"CmRaAAAAKB3ph-GZAIqxSRtl1U6tJzneJEzBaPoiUmnKhwdC-Eb4_FhHeTeP0sFubPHrulHHkotl7FFUpjFIaV0KhtlXt6RFhsPlhQD4JLT-hM7vAm_zlz82jqNNvXMYU2_9DlclEhAk03rxE6W_iFLpVvMYHrcLGhT0JIkY_PxCUpJoGNbPnca878Epwg","width":4092}],"place_id":"ChIJ557S87BLHRUROEsdf2-DYVs","rating":3.5,"reference":"CmRbAAAA5MR7-yuY_M7f6SIeuCLWMkNa3ZuGIY-hRfB4R5QFQyy4DLo152O9Z3pnOzxknU0uCB2LSP1-Gc_o1DtbmgqKJOYHTXP9dRoaCkTtAKbEs5a9IY-ucLb_cnqXvJPpcsofEhB19PpdDqT-31E0s1NRv6NpGhQt3Qh7Yt45xFrqolEtM32TyhOK1w","scope":"GOOGLE","types":["bank","finance","point_of_interest","establishment"],"vicinity":"67, כצנלסון, גבעתיים","task_identifier":{"id":"5adca4ddc8965c4734dd3d86","name":"leumi"}},"endPoint":{"geometry":{"location":{"lat":32.07941450000001,"lng":34.815057},"viewport":{"northeast":{"lat":32.08076477989272,"lng":34.81631727989272},"southwest":{"lat":32.07806512010728,"lng":34.81361762010727}}},"icon":"https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png","id":"536d0704689edaeac72dcd3a5df8ef4c0d9ccf86","name":"סופר-פארם כופר היישוב","opening_hours":{"open_now":false,"weekday_text":[]},"photos":[{"height":3024,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/116761068565218428792/photos\">Avihai Nizri</a>"],"photo_reference":"CmRaAAAAauOSqs90GrFmumMzGQteLXMNzfA7LA-pCNlR3yX8qmoxjD8ohb5U9FyGCVhPMP9xUxj0eKrXkoztF6rPvKsT2cEMwniXQi4I71zZYnX-zGIOqWJ28YO4M6H8MusG_RmBEhBMD41V7R_wIiN2rKcEDIwsGhTwqL57WlffdDJWf3xeI0lettbaVA","width":4032}],"place_id":"ChIJoTVzmLVLHRURQVg7qxZ17nk","rating":4,"reference":"CmRbAAAAghZKu_slhwDkFkaSuYJTRPA0_pZOxtxnRIRBrVgVf1xTeNHgLILyPsJ7WzH8cCdaaajWzm8Z5h11oGh_jS6ld5ABdYvnCKruzPtToN2DfcPrPbD4L599J44T65jZ-RGtEhDZ-Im4_4Jmlu79kSgkORqhGhSu1if1hBoJibNwydM3jGMkvj62Kw","scope":"GOOGLE","types":["pharmacy","store","health","point_of_interest","establishment"],"vicinity":"ביאליק 10, רמת גן","task_identifier":{"id":"5adca4eec8965c4734dd3d89","name":"acamol"}},"duration":683,"polylines":[{"start":{"lat":32.07543,"lng":34.80903},"end":{"lat":32.07548,"lng":34.80916}},{"start":{"lat":32.07548,"lng":34.80916},"end":{"lat":32.07568,"lng":34.80972}},{"start":{"lat":32.07568,"lng":34.80972},"end":{"lat":32.07574,"lng":34.80999}},{"start":{"lat":32.07574,"lng":34.80999},"end":{"lat":32.07574,"lng":34.81044}},{"start":{"lat":32.07574,"lng":34.81044},"end":{"lat":32.0757,"lng":34.81159}},{"start":{"lat":32.0757,"lng":34.81159},"end":{"lat":32.07571,"lng":34.81192}},{"start":{"lat":32.07571,"lng":34.81192},"end":{"lat":32.07573,"lng":34.81212}},{"start":{"lat":32.07573,"lng":34.81212},"end":{"lat":32.0759,"lng":34.81248}},{"start":{"lat":32.0759,"lng":34.81248},"end":{"lat":32.07612,"lng":34.81278}},{"start":{"lat":32.07612,"lng":34.81278},"end":{"lat":32.07701,"lng":34.81378}},{"start":{"lat":32.07701,"lng":34.81378},"end":{"lat":32.07714,"lng":34.81393}},{"start":{"lat":32.07714,"lng":34.81393},"end":{"lat":32.0772,"lng":34.81403}},{"start":{"lat":32.0772,"lng":34.81403},"end":{"lat":32.07734,"lng":34.81425}},{"start":{"lat":32.07734,"lng":34.81425},"end":{"lat":32.07751,"lng":34.81441}},{"start":{"lat":32.07751,"lng":34.81441},"end":{"lat":32.07786,"lng":34.8147}},{"start":{"lat":32.07786,"lng":34.8147},"end":{"lat":32.0782,"lng":34.81501}},{"start":{"lat":32.0782,"lng":34.81501},"end":{"lat":32.07837,"lng":34.8151}},{"start":{"lat":32.07837,"lng":34.8151},"end":{"lat":32.07891,"lng":34.81491}},{"start":{"lat":32.07891,"lng":34.81491},"end":{"lat":32.07904,"lng":34.81488}},{"start":{"lat":32.07904,"lng":34.81488},"end":{"lat":32.07918,"lng":34.81488}},{"start":{"lat":32.07918,"lng":34.81488},"end":{"lat":32.07942,"lng":34.81488}}]},{"startPoint":{"geometry":{"location":{"lat":32.07941450000001,"lng":34.815057},"viewport":{"northeast":{"lat":32.08076477989272,"lng":34.81631727989272},"southwest":{"lat":32.07806512010728,"lng":34.81361762010727}}},"icon":"https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png","id":"536d0704689edaeac72dcd3a5df8ef4c0d9ccf86","name":"סופר-פארם כופר היישוב","opening_hours":{"open_now":false,"weekday_text":[]},"photos":[{"height":3024,"html_attributions":["<a href=\"https://maps.google.com/maps/contrib/116761068565218428792/photos\">Avihai Nizri</a>"],"photo_reference":"CmRaAAAAauOSqs90GrFmumMzGQteLXMNzfA7LA-pCNlR3yX8qmoxjD8ohb5U9FyGCVhPMP9xUxj0eKrXkoztF6rPvKsT2cEMwniXQi4I71zZYnX-zGIOqWJ28YO4M6H8MusG_RmBEhBMD41V7R_wIiN2rKcEDIwsGhTwqL57WlffdDJWf3xeI0lettbaVA","width":4032}],"place_id":"ChIJoTVzmLVLHRURQVg7qxZ17nk","rating":4,"reference":"CmRbAAAAghZKu_slhwDkFkaSuYJTRPA0_pZOxtxnRIRBrVgVf1xTeNHgLILyPsJ7WzH8cCdaaajWzm8Z5h11oGh_jS6ld5ABdYvnCKruzPtToN2DfcPrPbD4L599J44T65jZ-RGtEhDZ-Im4_4Jmlu79kSgkORqhGhSu1if1hBoJibNwydM3jGMkvj62Kw","scope":"GOOGLE","types":["pharmacy","store","health","point_of_interest","establishment"],"vicinity":"ביאליק 10, רמת גן","task_identifier":{"id":"5adca4eec8965c4734dd3d89","name":"acamol"}},"endPoint":{"address":"Hertsel St 1, Ramat Gan, Израиль","place_id":"ChIJLXgkPjVKHRURN1jg_EdA7I4","geometry":{"location":{"lat":32.0804805,"lng":34.819580900000005}},"task_identifier":{"name":"End"}},"duration":419,"polylines":[{"start":{"lat":32.07942,"lng":34.81488},"end":{"lat":32.07918,"lng":34.81488}},{"start":{"lat":32.07918,"lng":34.81488},"end":{"lat":32.07918,"lng":34.81494}},{"start":{"lat":32.07918,"lng":34.81494},"end":{"lat":32.07923,"lng":34.81528}},{"start":{"lat":32.07923,"lng":34.81528},"end":{"lat":32.07927,"lng":34.81544}},{"start":{"lat":32.07927,"lng":34.81544},"end":{"lat":32.07946,"lng":34.81601}},{"start":{"lat":32.07946,"lng":34.81601},"end":{"lat":32.07971,"lng":34.81667}},{"start":{"lat":32.07971,"lng":34.81667},"end":{"lat":32.0799,"lng":34.81701}},{"start":{"lat":32.0799,"lng":34.81701},"end":{"lat":32.08037,"lng":34.81782}},{"start":{"lat":32.08037,"lng":34.81782},"end":{"lat":32.08053,"lng":34.81807}},{"start":{"lat":32.08053,"lng":34.81807},"end":{"lat":32.0809,"lng":34.8185}},{"start":{"lat":32.0809,"lng":34.8185},"end":{"lat":32.081,"lng":34.81859}},{"start":{"lat":32.081,"lng":34.81859},"end":{"lat":32.08055,"lng":34.81962}}]}],"num_of_segments":4,"sum_of_durations":3039,"tasks":[{"name":"Start","duration":8.245888996530919,"place":{"location":{"lat":32.0900601,"lng":34.803569100000004},"id":"ChIJnfFzOcRLHRURM9hDEucFhfs","address":"Anne Frank St 12, Ramat Gan, Израиль"}},{"name":"fuil","duration":1.969848774648404,"place":{"location":{"lat":32.082628,"lng":34.802189},"name":"Delek","id":"ChIJwSfU0bhLHRUR7lnDkXluJWQ","address":"זאב זבוטינסקי 4, רמת גן"}},{"name":"leumi","duration":2.2713006800069424,"place":{"location":{"lat":32.0756032,"lng":34.8089201},"name":"בנק לאומי","id":"ChIJ557S87BLHRUROEsdf2-DYVs","address":"67, כצנלסון, גבעתיים"}},{"name":"acamol","duration":6.640608099374283,"place":{"location":{"lat":32.07941450000001,"lng":34.815057},"name":"סופר-פארם כופר היישוב","id":"ChIJoTVzmLVLHRURQVg7qxZ17nk","address":"ביאליק 10, רמת גן"}},{"name":"End","duration":5.9686683875374325,"place":{"location":{"lat":32.0804805,"lng":34.819580900000005},"id":"ChIJLXgkPjVKHRURN1jg_EdA7I4","address":"Hertsel St 1, Ramat Gan, Израиль"}}]},"all_tasks":[{"_id":"5adca4ddc8965c4734dd3d86","user_token_id":"5ad63c8f869a7648bc6a2d6b","name":"leumi","type":"bank","task_place":{"_id":"5adca4ddc8965c4734dd3d87","place_type":"bank","place_key_word":"leumi"},"__v":0},{"_id":"5adca4eec8965c4734dd3d89","user_token_id":"5ad63c8f869a7648bc6a2d6b","name":"acamol","type":"pharmacy","task_place":{"_id":"5adca4eec8965c4734dd3d8a","place_type":"pharmacy","place_key_word":"acamol"},"__v":0},{"_id":"5adcb2d48c71eb0ac054640c","user_token_id":"5ad63c8f869a7648bc6a2d6b","name":"fuil","type":"gas_station","task_place":{"_id":"5adcb2d48c71eb0ac054640d","place_type":"gas_station","place_key_word":"fuil"},"__v":0}],"__v":0}};
  constructor(
    private http: Http,
    private userServiseModule: UserServiseModule
  ) {
    this.route = this.staticRes.data.recommended_route;
  }

  createRoute(routeInitData):Observable<any> {
    let headers = new Headers({'Content-Type': 'application/json'});
    let options = new RequestOptions({headers: headers});
    // console.log(this.userServiseModule.getUserFromLocalStorege());
    console.log(JSON.stringify(routeInitData));
    // console.log(this.url);
    return this.http.post(
        `${this.url}create_route`,
        {
            user: JSON.stringify(this.userServiseModule.getUserFromLocalStorege()),
            route_init_data: JSON.stringify(routeInitData)
        },
        options
    ).map(this.extractData).catch(this.handleError);
  }

  getImageStatic(imgUrl):Observable<any> {
    console.log(imgUrl);
    return this.http.get(imgUrl).map(this.extractData).catch(this.handleError);
  }

  private extractData(res: Response) {
    console.log(res.json());
    return res.json() || {};
  }

  private handleError(error: Response | any) {
    let errMsg: string;
    if (error instanceof Response) {
      const body = error.json() || '';
      const err = body.error || JSON.stringify(body);
      errMsg = `${error.status} - ${error.statusText || ''} ${err}`;
    } else {
      errMsg = error.message ? error.message : error.toString();
    }
    console.log("errMsg")
    console.error(errMsg);
    return Observable.throw(errMsg);
  }
}